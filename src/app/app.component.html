<ion-app>
    <ion-menu side="start" contentId="main">
      <ion-content>
        <ion-list lines="none">
          <ion-menu-toggle *ngFor="let page of appPages; let i = index">
            <ion-item
              [routerLink]="page.url"
              routerLinkActive="selected"
              routerDirection="root"
              detail="false"
            >
              <ion-icon slot="start" [name]="page.icon + '-outline'"></ion-icon>
              <ion-label>
                {{ page.title }}
              </ion-label>
            </ion-item>
          </ion-menu-toggle>
        </ion-list>

        <ng-container *ngIf="authService.user | async as user; else loggedOut">
          <ion-list lines="none">
            <ion-menu-toggle>
              <ion-item>
                <ion-icon slot="start" name="person-circle"></ion-icon>
                <ion-label> Profile </ion-label>
              </ion-item>
            </ion-menu-toggle>
            <ion-menu-toggle>
              <ion-item>
                <ion-icon slot="start" name="settings"></ion-icon>
                <ion-label> Settings </ion-label>
              </ion-item>
            </ion-menu-toggle>
          </ion-list>

          <ion-list lines="none">
            <ion-menu-toggle>
              <ion-item button (click)="logout()" class="login-button">
                <ion-icon slot="start" name="log-out"></ion-icon>
                <ion-label> Log Out </ion-label>
              </ion-item>
            </ion-menu-toggle>
          </ion-list>
        </ng-container>

        <ng-template #loggedOut>
          <ion-list lines="none">
            <ion-menu-toggle>
              <ion-item
                button
                href="http://localhost:3000/auth/steam"
                class="login-button"
              >
                <ion-icon
                  slot="start"
                  src="assets/icon/steam-circled.svg"
                ></ion-icon>
                <ion-label> Log In </ion-label>
              </ion-item>
            </ion-menu-toggle>
          </ion-list>
        </ng-template>
      </ion-content>
    </ion-menu>

    <!-- the main content -->
    <ion-router-outlet id="main"></ion-router-outlet>
</ion-app>
